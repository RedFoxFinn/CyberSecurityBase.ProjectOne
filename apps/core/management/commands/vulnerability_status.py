"""
Management command to check current vulnerability mode and provide usage information.
Usage: python manage.py vulnerability_status
"""
from django.core.management.base import BaseCommand
from django.conf import settings


class Command(BaseCommand):
    help = 'Check current vulnerability mode and display status'

    def handle(self, *args, **options):
        mode_status = 'VULNERABLE' if settings.VULNERABLE else 'SECURE'

        self.stdout.write(self.style.SUCCESS('=' * 60))
        self.stdout.write(self.style.SUCCESS('CSB Project 1 - Vulnerability Status'))
        self.stdout.write(self.style.SUCCESS('=' * 60))

        if settings.VULNERABLE:
            self.stdout.write(self.style.WARNING(f'\nCurrent Mode: {mode_status}'))
            self.stdout.write(self.style.WARNING('Intentional vulnerabilities are ACTIVE\n'))
        else:
            self.stdout.write(self.style.SUCCESS(f'\nCurrent Mode: {mode_status}'))
            self.stdout.write(self.style.SUCCESS('Security fixes are ACTIVE\n'))

        self.stdout.write('To toggle the mode, use:')
        self.stdout.write(self.style.HTTP_INFO('  Vulnerable mode: python manage.py runserver'))
        self.stdout.write(self.style.HTTP_INFO('  Secure mode: VULNERABLE=False python manage.py runserver'))

        self.stdout.write(f'\nCurrent setting: VULNERABLE={settings.VULNERABLE}')

        self.stdout.write('\n' + '=' * 60 + '\n')
